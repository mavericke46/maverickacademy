<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Customizable Puzzle Game with Next Options</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: black;
    color: white;
    text-align: center;
    padding: 20px;
  }
  h2 {
    color: #00cec9;
    text-shadow: 0 0 12px #00cec9;
    margin-bottom: 20px;
    font-size: 28px;
  }
  #difficultySelector {
    margin-bottom: 20px;
  }
  select {
    padding: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background-color: #00cec9;
    color: #2d3436;
    font-weight: bold;
    box-shadow: 0 0 10px #00cec9;
    transition: background-color 0.3s, box-shadow 0.3s;
  }
  select:hover {
    background-color: #01a3a4;
    box-shadow: 0 0 15px #01a3a4;
  }
  button {
    padding: 10px 20px;
    border-radius: 10px;
    background-color: #00cec9;
    border: none;
    color: #2d3436;
    font-weight: bold;
    cursor: pointer;
    
    margin-left: 10px;
    transition: background-color 0.3s, box-shadow 0.3s;
  }
  button:hover {
    background-color: #01a3a4;
    box-shadow: 0 0 18px #01a3a4;
  }
  .puzzle-grid {
    display: grid;
    gap: 6px;
    justify-content: center;
    perspective: 1000px;
    margin-bottom: 20px;
  }
  .puzzle-piece {
    position: relative;
    cursor: pointer;
    width: 120px;
    height: 100px;
    border-radius: 12px;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.4);
    transition: box-shadow 0.3s;
    background: #34495e;
  }
  .puzzle-piece:hover:not(.flipped) {
    box-shadow: 0 0 15px #00cec9;
  }
  .piece-inner {
    position: absolute;
    width: 100%;
    height: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
    border-radius: 12px;
  }
  .flipped .piece-inner {
    transform: rotateY(180deg);
    cursor: default;
    box-shadow: 0 0 15px #2ecc71;
  }
  .piece-front, .piece-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    font-size: 26px;
    user-select: none;
  }
  .piece-front {
    background-color: #34495e;
    color: white;
  }
  .piece-back {
    background-size: cover;
    transform: rotateY(180deg);
  }
  #questionBox, #feedback {
    min-height: 40px;
    font-size: 20px;
    margin-bottom: 15px;
  }
  .choice-btn {
    padding: 10px 20px;
    border-radius: 12px;
    background: #34495e;
    color: white;
    border: none;
    margin: 5px;
    cursor: pointer;
    font-weight: bold;
    box-shadow: 0 0 10px #00cec9;
    transition: background-color 0.3s, box-shadow 0.3s;
  }
  .choice-btn:hover {
    background: #00cec9;
    color: #2d3436;
    box-shadow: 0 0 15px #00cec9;
  }
  #completionOptions {
    margin-top: 20px;
    display: none;
  }
  #completionOptions button {
    padding: 12px 24px;
    margin: 10px;
    font-size: 18px;
    border-radius: 12px;
    border: none;
    background-color: #00cec9;
    color: #2d3436;
    cursor: pointer;
    box-shadow: 0 0 15px #00cec9;
    transition: background 0.3s;
  }
  #completionOptions button:hover {
    background-color: #019ea1;
  }
   .back-button {
      background: transparent;
      border: 2px solid #ff4d4d;
      color: #ff4d4d;
      padding: 12px 24px;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 40px;
      transition: 0.3s;
    }

    .back-button:hover {
      background: #ff4d4d;
      color: black;
      box-shadow: 0 0 15px #ff4d4d;
    }
</style>
</head>
<body>

<h2>Customizable Puzzle Quiz Game</h2>

<div id="difficultySelector">
  <label for="difficulty">Select Puzzle Size:</label>
  <select id="difficulty">
    <option value="2">2x2 (4 Questions)</option>
    <option value="3">3x3 (9 Questions)</option>
    <option value="4">4x4 (16 Questions)</option>
    <option value="5" selected>5x5 (25 Questions)</option>
  </select>
  <button onclick="startPuzzle()">Start Puzzle</button>
</div>

<div class="puzzle-grid" id="puzzleGrid"></div>

<div id="questionBox"></div>
<div id="choicesBox"></div>
<div id="feedback"></div>

<div id="completionOptions">
  <button onclick="retryPuzzle()">Retry Puzzle</button>
  <button onclick="changeLevel()">Change Level</button>
  <button onclick="goToNextGame()">Next Game (Word Cross)</button>
</div>

<button class="back-button" onclick="window.history.back()">← Back to Subjects</button>

<script>
const IMAGE_URL = 'https://i.imgur.com/oQfQMH3.jpg'; // Your image here
const allQuestions = [];
for(let i = 1; i <= 25; i++) {
  allQuestions.push({
    question: `What is ${i} + ${i}?`,
    answer: (i + i).toString(),
    choices: shuffle([i + i, i + i - 1, i + i + 1, i + i + 2].map(String))
  });
}

let currentGridSize = 5;
let currentQuestions = [];
let currentQuestionId = null;
let answeredQuestions = new Set();

function shuffle(array) {
  for(let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function startPuzzle() {
  currentGridSize = parseInt(document.getElementById('difficulty').value);
  const totalPieces = currentGridSize * currentGridSize;
  currentQuestions = allQuestions.slice(0, totalPieces);
  answeredQuestions.clear();
  currentQuestionId = null;
  document.getElementById('questionBox').textContent = '';
  document.getElementById('choicesBox').innerHTML = '';
  document.getElementById('feedback').textContent = '';
  document.getElementById('completionOptions').style.display = 'none';
  createPuzzleGrid();
}

function createPuzzleGrid() {
  const grid = document.getElementById('puzzleGrid');
  grid.style.gridTemplateColumns = `repeat(${currentGridSize}, 120px)`;
  grid.style.gridTemplateRows = `repeat(${currentGridSize}, 100px)`;
  grid.innerHTML = '';

  for (let i = 0; i < currentQuestions.length; i++) {
    const piece = document.createElement('div');
    piece.className = 'puzzle-piece';
    piece.style.width = '120px';
    piece.style.height = '100px';
    piece.dataset.index = i;

    const inner = document.createElement('div');
    inner.className = 'piece-inner';

    const front = document.createElement('div');
    front.className = 'piece-front';
    front.textContent = '❓';

    const back = document.createElement('div');
    back.className = 'piece-back';
    const x = -(i % currentGridSize) * 120;
    const y = -Math.floor(i / currentGridSize) * 100;
    back.style.backgroundImage = `url(${IMAGE_URL})`;
    back.style.backgroundPosition = `${x}px ${y}px`;
    back.style.backgroundSize = `${currentGridSize * 120}px ${currentGridSize * 100}px`;

    inner.appendChild(front);
    inner.appendChild(back);
    piece.appendChild(inner);
    piece.addEventListener('click', () => showQuestion(i));
    grid.appendChild(piece);
  }
}

function showQuestion(id) {
  currentQuestionId = id;
  const q = currentQuestions[id];
  document.getElementById('questionBox').textContent = q.question;
  const choicesBox = document.getElementById('choicesBox');
  choicesBox.innerHTML = '';
  document.getElementById('feedback').textContent = '';

  q.choices.forEach(choice => {
    const btn = document.createElement('button');
    btn.className = 'choice-btn';
    btn.textContent = choice;
    btn.onclick = () => checkAnswer(choice);
    choicesBox.appendChild(btn);
  });
}

function checkAnswer(choice) {
  const q = currentQuestions[currentQuestionId];
  if (choice === q.answer) {
    document.getElementById('feedback').textContent = 'Correct ✅';
    document.getElementById('feedback').style.color = '#2ecc71';
    const piece = document.querySelector(`.puzzle-piece[data-index="${currentQuestionId}"]`);
    piece.classList.add('flipped');
    answeredQuestions.add(currentQuestionId);
    setTimeout(() => {
      document.getElementById('questionBox').textContent = '';
      document.getElementById('choicesBox').innerHTML = '';
      document.getElementById('feedback').textContent = '';
      if (answeredQuestions.size === currentQuestions.length) {
        document.getElementById('completionOptions').style.display = 'block';
      }
    }, 1500);
  } else {
    document.getElementById('feedback').textContent = `Incorrect ❌ Correct: ${q.answer}`;
    document.getElementById('feedback').style.color = '#e74c3c';
  }
}

function retryPuzzle() {
  startPuzzle();
}

function changeLevel() {
  document.getElementById('completionOptions').style.display = 'none';
}

function goToNextGame() {
  window.location.href = 'wordc.html'; // Your Word Cross Game URL
}
</script>

</body>
</html>
